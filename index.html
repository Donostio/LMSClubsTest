<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LMS Clubs</title>
  <link rel="icon" type="image/png" href="lms_logo.png">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap">
  <style>
    :root{--muted:#6b7280;--red:#ef4444;--black:#000;}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; -webkit-font-smoothing:antialiased;}
    body {
      background:#000;
      background-image: repeating-linear-gradient(to right, var(--red), var(--red) 2px, #000 2px, #000 24px);
    }
    .page {max-width:1180px;margin:28px auto;background:#fff;border-radius:12px;padding:18px;box-shadow:0 18px 60px rgba(0,0,0,0.20);}
    header.top { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:12px; }
    header.top h1 { margin:0; font-size:22px; font-weight:700; color:#111; }
    #year-filter {padding:10px;border-radius:10px;border:1px solid #e6e6e6;width:20%;min-width:84px;color:var(--red);font-weight:600;}
    #year-filter.filled { color:#111; }
    .print-controls { display:flex; align-items:center; gap:8px; margin-top:6px; }
    #search-input {padding:10px;border-radius:10px;border:1px solid #e6e6e6;width:20%;min-width:200px;}
    #clubs-list {display:grid;grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));gap:14px;margin-top:12px;}
    .club-card {position:relative;background:#fff;border:1px solid #e6e6e6;border-radius:12px;padding:14px;color:#111;transition: box-shadow .15s ease, transform .12s ease;min-height:120px;}
    .club-card:hover {transform:translateY(-4px);box-shadow:0 8px 28px rgba(0,0,0,0.06);}
    .muted {color:var(--muted);}
    .club-select-box {position:absolute;right:12px;bottom:12px;}
    .club-select-box input{display:none;} /* hidden until year selected */
    .club-select-box.show input{display:block;}
    .selected {box-shadow:0 0 0 3px rgba(0,0,0,1), 0 0 0 6px rgba(239,68,68,0.95);border:2px solid rgba(239,68,68,0.9);}
    .filter-overlay {display:none;position:fixed;inset:0;background:rgba(0,0,0,0.45);z-index:60;}
    .filter-panel {position:fixed;right:0;top:0;height:100%;width:360px;max-width:92%;background:#fff;z-index:70;transform:translateX(110%);transition:transform .28s cubic-bezier(.2,.9,.3,1);box-shadow:-20px 20px 60px rgba(0,0,0,0.12);padding:20px;overflow:auto;}
    .filter-panel.open {transform:translateX(0);}
    .clear-link {color:#7c3aed;cursor:pointer;font-size:13px;background:none;border:none;padding:0;}
    #cat-container {position:fixed;z-index:120;pointer-events:none;left:50%;bottom:0;transform:translateX(-50%) translateY(120%);transition: transform 0.9s cubic-bezier(.2,.9,.3,1), opacity .6s;opacity:0;}
    #cat-container.show {transform:translateX(-50%) translateY(0);opacity:1;}
    #cat-image {width:640px;border-radius:.75rem;display:block;} /* 4Ã— bigger */
    @media print {@page {size: landscape; margin:12mm;}body {background:#fff;}#filter-panel,#filter-btn,#search-input,.filter-overlay {display:none !important;}.page * {visibility: visible;}}
    @media (max-width:720px){#search-input,#year-filter {width:100%;}.print-controls {flex-wrap:wrap;}}
  </style>
</head>
<body>
  <!-- cat container -->
  <div id="cat-container"><img id="cat-image" src="" alt="cat"></div>

  <div class="page">
    <header class="top">
      <h1>Lady Margaret School â€” Clubs 2025-26</h1>
      <button id="filter-btn" style="background:#7c3aed;color:#fff;padding:10px;border-radius:10px;border:none;cursor:pointer;">Filters</button>
    </header>

    <section style="display:flex;gap:12px;align-items:flex-start;flex-wrap:wrap;">
      <div style="min-width:260px;">
        <label for="year-filter" style="display:block;font-weight:600;margin-bottom:6px;">Year Group</label>
        <div style="display:flex;align-items:center;gap:8px;">
          <select id="year-filter">
            <option value="">All</option>
            <option value="7">7</option><option value="8">8</option><option value="9">9</option>
            <option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option>
          </select>
          <div id="print-controls" class="print-controls"><span id="year-message" style="color:var(--muted);margin-top:6px;">Filter by year</span></div>
        </div>
        <div style="margin-top:12px;">
          <label for="search-input" style="display:block;font-weight:600;margin-bottom:6px;">Search</label>
          <input id="search-input" placeholder="Search for a club..." />
        </div>
      </div>
      <div style="flex:1;align-self:flex-end;">
        <div id="active-filters-summary" style="color:var(--muted);font-size:13px;">All clubs shown</div>
      </div>
    </section>

    <div id="clubs-list"></div>
    <div id="no-results" style="display:none;color:var(--muted);padding:18px;text-align:center;">No clubs found matching your criteria.</div>

    <footer style="margin-top:28px;color:var(--muted);font-size:13px;text-align:center;">
      <div>This site is maintained by LMS class reps ðŸš€ðŸš€ðŸš€ðŸš€ðŸš€ðŸš€ðŸš€ðŸš€ðŸš€ðŸš€ðŸš€</div>
      <div style="margin-top:6px;">Feedback: <a href="https://forms.gle/5Gdrj6RPAEXf7jKy8" target="_blank" style="color:var(--red);">Please share your thoughts</a></div>
    </footer>
  </div>

  <!-- filter panel -->
  <div id="filter-overlay" class="filter-overlay"></div>
  <aside id="filter-panel" class="filter-panel">
    <h2>Filters</h2>
    <div><div style="display:flex;justify-content:space-between;align-items:center;"><strong>Day</strong><button id="clear-day" class="clear-link">Clear</button></div>
      <label><input type="checkbox" class="day-filter" value="All" checked> All</label><br>
      <label><input type="checkbox" class="day-filter" value="Monday"> Monday</label><br>
      <label><input type="checkbox" class="day-filter" value="Tuesday"> Tuesday</label><br>
      <label><input type="checkbox" class="day-filter" value="Wednesday"> Wednesday</label><br>
      <label><input type="checkbox" class="day-filter" value="Thursday"> Thursday</label><br>
      <label><input type="checkbox" class="day-filter" value="Friday"> Friday</label>
    </div>
    <div><div style="display:flex;justify-content:space-between;align-items:center;"><strong>When</strong><button id="clear-when" class="clear-link">Clear</button></div>
      <label><input type="checkbox" class="when-filter" value="All" checked> All</label><br>
      <label><input type="checkbox" class="when-filter" value="Before School"> Before School</label><br>
      <label><input type="checkbox" class="when-filter" value="Lunchtime"> Lunchtime</label><br>
      <label><input type="checkbox" class="when-filter" value="After School"> After School</label>
    </div>
    <div><div style="display:flex;justify-content:space-between;align-items:center;"><strong>Department</strong><button id="clear-dept" class="clear-link">Clear</button></div>
      <div id="dept-options"></div>
    </div>
    <div style="margin-top:12px;"><button id="clear-all" style="width:100%;padding:8px;border-radius:8px;">Clear All Filters</button></div>
  </aside>

  <iframe id="print-iframe" style="display:none;"></iframe>

<script>
// full JavaScript content goes here (cats, render, print, csv, filters)
</script>
</body>
</html>
